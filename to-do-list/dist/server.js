(()=>{var t={759:(t,e,s)=>{const o=new(0,s(548).MongoClient)("mongodb+srv://alex:alex@cluster0.5noqo.mongodb.net/myFirstDatabase?retryWrites=true&w=majority",{useNewUrlParser:!0,useUnifiedTopology:!0});t.exports={client:o}},698:(t,e,s)=>{const o=s(759).client,n=s(548).ObjectId;t.exports={getAllTasks:async function(t,e){await o.connect(((s,o)=>{const{q:n}=t.query;o.db("todolist").collection("tasks").find({}).toArray(((t,s)=>{if(n)return e.json(s.filter((t=>t.description.toLowerCase().includes(n.toLowerCase()))));e.json(s)}))}))},getOneTask:async function(t,e){await o.connect(((s,o)=>{const n=o.db("todolist"),{id:a}=t.params;n.collection("tasks").find({}).toArray(((t,s)=>{e.json(s.filter((t=>""+t._id===a))),console.log(s)}))}))},deleteOneTask:async function(t,e){await o.connect(((s,o)=>{const a=o.db("todolist"),{id:r}=t.params,i={_id:n(r)};a.collection("tasks").deleteOne(i,((t,s)=>{e.status(201).json(i),console.log("1 task deleted")}))}))},updateTask:async function(t,e){await o.connect(((s,o)=>{const a=o.db("todolist"),{id:r}=t.params,i={_id:n(r)},c={$set:({...changes}=t.body)};a.collection("tasks").updateOne(i,c,((t,s)=>{e.status(201).json(c)}))}))},addNewTask:async function(t,e){await o.connect(((s,o)=>{const n=o.db("todolist"),a=Object.assign({},t.body,{dateOfCreate:Date.now(),isFinished:!1});n.collection("tasks").insertOne(a,((t,s)=>{e.status(201).json(a)}))}))}}},45:(t,e,s)=>{const o=s(127).Router(),{getAllTasks:n,getOneTask:a,deleteOneTask:r,updateTask:i,addNewTask:c}=s(698);o.get("/tasks",n),o.get("/tasks/:id",a),o.delete("/tasks/:id",r),o.put("/tasks/:id",i),o.post("/tasks",c),t.exports=o},473:t=>{"use strict";t.exports=require("body-parser")},479:t=>{"use strict";t.exports=require("cors")},127:t=>{"use strict";t.exports=require("express")},548:t=>{"use strict";t.exports=require("mongodb")}},e={};function s(o){var n=e[o];if(void 0!==n)return n.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,s),a.exports}(()=>{const t=s(127),e=s(473),o=s(479),n=t(),a=s(45);n.use(o()),n.use(e.urlencoded({extended:!1})),n.use(e.json()),n.use("/",a),function(){try{n.listen(3e3,(()=>{console.log("Server started at http://localhost:3000")}))}catch(t){console.log(t)}}()})()})();